"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate/route";
exports.ids = ["app/api/generate/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_lf_Desktop_code_cursor_actionfiguretrend_com_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/generate/route.ts */ \"(rsc)/./app/api/generate/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate/route\",\n        pathname: \"/api/generate\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate/route\"\n    },\n    resolvedPagePath: \"/Users/lf/Desktop/code-cursor/actionfiguretrend.com/app/api/generate/route.ts\",\n    nextConfigOutput,\n    userland: _Users_lf_Desktop_code_cursor_actionfiguretrend_com_app_api_generate_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGZ2VuZXJhdGUlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZnZW5lcmF0ZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmxmJTJGRGVza3RvcCUyRmNvZGUtY3Vyc29yJTJGYWN0aW9uZmlndXJldHJlbmQuY29tJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRmxmJTJGRGVza3RvcCUyRmNvZGUtY3Vyc29yJTJGYWN0aW9uZmlndXJldHJlbmQuY29tJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUM2QjtBQUMxRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2FjdGlvbmZpZ3VyZXRyZW5kLz8wYzhkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9sZi9EZXNrdG9wL2NvZGUtY3Vyc29yL2FjdGlvbmZpZ3VyZXRyZW5kLmNvbS9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dlbmVyYXRlXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9sZi9EZXNrdG9wL2NvZGUtY3Vyc29yL2FjdGlvbmZpZ3VyZXRyZW5kLmNvbS9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/generate/route.ts":
/*!***********************************!*\
  !*** ./app/api/generate/route.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var replicate__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! replicate */ \"(rsc)/./node_modules/replicate/index.js\");\n/* harmony import */ var replicate__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(replicate__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst replicate = new (replicate__WEBPACK_IMPORTED_MODULE_1___default())({\n    auth: process.env.REPLICATE_API_TOKEN\n});\nasync function POST(request) {\n    try {\n        const { image, style } = await request.json();\n        // Validate input\n        if (!image) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No image provided\"\n            }, {\n                status: 400\n            });\n        }\n        // Build multiple prompt variations for better results\n        const primaryPrompt = buildPrompt(style);\n        const enhancedPrompt = buildEnhancedPrompt(style, primaryPrompt);\n        console.log(\"Primary prompt:\", primaryPrompt);\n        console.log(\"Enhanced prompt:\", enhancedPrompt);\n        // Call Replicate API with enhanced prompt\n        const input = {\n            prompt: enhancedPrompt,\n            input_image: image,\n            output_format: \"jpg\",\n            num_inference_steps: 28,\n            guidance_scale: 7.5,\n            strength: 0.8 // Balance between input image and prompt\n        };\n        const output = await replicate.run(\"black-forest-labs/flux-kontext-pro\", {\n            input\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            imageUrl: output\n        });\n    } catch (error) {\n        console.error(\"API Error:\", error);\n        // Provide more specific error messages\n        let errorMessage = \"Generation failed, please try again later\";\n        if (error instanceof Error) {\n            if (error.message.includes(\"rate limit\")) {\n                errorMessage = \"Too many requests. Please wait a moment and try again.\";\n            } else if (error.message.includes(\"invalid image\")) {\n                errorMessage = \"Invalid image format. Please upload a clear photo.\";\n            } else if (error.message.includes(\"timeout\")) {\n                errorMessage = \"Generation timed out. Try with fewer accessories.\";\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\nfunction buildPrompt(style) {\n    const { theme, accessories, label } = style;\n    // Build a comprehensive prompt for action figure generation\n    let prompt = \"Create a detailed collectible action figure in vintage toy packaging, 90s style blister pack with cardboard backing, vibrant colors, professional toy photography\";\n    // Add theme if specified\n    if (theme) {\n        prompt += `, figure styled as ${theme}`;\n    }\n    // Add accessories with more detailed descriptions and emphasis\n    if (accessories && accessories.length > 0) {\n        // Create detailed accessory descriptions with positioning hints\n        const accessoryDescriptions = accessories.map((accessory, index)=>{\n            const position = index === 0 ? \"prominently\" : index === 1 ? \"clearly\" : \"visibly\";\n            switch(accessory.toLowerCase()){\n                case \"guitar\":\n                    return `${position} holding a detailed miniature electric guitar in hands`;\n                case \"microphone\":\n                    return `${position} displaying a microphone (handheld or on stand)`;\n                case \"sunglasses\":\n                    return `${position} wearing stylish sunglasses on face`;\n                case \"camera\":\n                    return `${position} holding a small professional camera`;\n                case \"phone\":\n                    return `${position} with smartphone accessory in hand or pocket`;\n                case \"headset\":\n                    return `${position} wearing gaming headset with visible microphone`;\n                case \"controller\":\n                    return `${position} holding game controller in hands`;\n                case \"keyboard\":\n                    return `${position} with miniature keyboard accessory`;\n                case \"makeup\":\n                    return `${position} with makeup kit and brushes visible`;\n                case \"handbag\":\n                    return `${position} carrying fashionable handbag`;\n                case \"dumbbells\":\n                    return `${position} holding miniature dumbbells in both hands`;\n                case \"water bottle\":\n                    return `${position} with sports water bottle accessory`;\n                case \"paintbrush\":\n                    return `${position} holding artist paintbrush in hand`;\n                case \"palette\":\n                    return `${position} with colorful art palette in hand`;\n                case \"chef hat\":\n                    return `${position} wearing white chef hat on head`;\n                case \"briefcase\":\n                    return `${position} carrying professional briefcase`;\n                case \"laptop\":\n                    return `${position} with miniature laptop computer open`;\n                case \"watch\":\n                    return `${position} wearing detailed wristwatch on wrist`;\n                case \"mask\":\n                    return `${position} wearing superhero mask on face`;\n                case \"cape\":\n                    return `${position} with flowing superhero cape attached`;\n                case \"telescope\":\n                    return `${position} holding telescope in hands`;\n                case \"sword\":\n                    return `${position} wielding detailed sword weapon`;\n                case \"tripod\":\n                    return `${position} with camera tripod accessory nearby`;\n                case \"mouse\":\n                    return `${position} with computer mouse accessory`;\n                case \"perfume\":\n                    return `${position} with perfume bottle accessory`;\n                case \"towel\":\n                    return `${position} with sports towel draped or held`;\n                case \"canvas\":\n                    return `${position} with miniature art canvas displayed`;\n                case \"pan\":\n                    return `${position} holding cooking pan in hand`;\n                case \"knife set\":\n                    return `${position} with chef knife set visible`;\n                case \"backpack\":\n                    return `${position} wearing travel backpack on back`;\n                case \"map\":\n                    return `${position} holding folded map in hands`;\n                case \"test tube\":\n                    return `${position} holding scientific test tubes`;\n                case \"microscope\":\n                    return `${position} with miniature microscope accessory`;\n                case \"lab coat\":\n                    return `${position} wearing white lab coat`;\n                case \"badge\":\n                    return `${position} with hero badge on chest`;\n                case \"hat\":\n                    return `${position} wearing distinctive hat on head`;\n                case \"books\":\n                    return `${position} with miniature books accessory`;\n                case \"coffee cup\":\n                    return `${position} holding coffee cup in hand`;\n                case \"glasses\":\n                    return `${position} wearing eyeglasses on face`;\n                case \"necklace\":\n                    return `${position} wearing necklace around neck`;\n                case \"ring\":\n                    return `${position} wearing ring on finger`;\n                case \"bracelet\":\n                    return `${position} wearing bracelet on wrist`;\n                case \"wallet\":\n                    return `${position} with wallet accessory`;\n                case \"keys\":\n                    return `${position} with key chain accessory`;\n                case \"charger\":\n                    return `${position} with phone charger accessory`;\n                default:\n                    return `${position} with ${accessory.toLowerCase()} accessory clearly visible`;\n            }\n        });\n        // Create a strong emphasis on ALL accessories being present\n        prompt += `. IMPORTANT: This action figure MUST display ALL ${accessories.length} accessories simultaneously: ${accessoryDescriptions.join(\", \")}. Every single accessory must be clearly visible, detailed, and properly positioned on or with the figure`;\n        // Add redundant emphasis for critical accessories\n        if (accessories.length > 1) {\n            prompt += `. Ensure no accessory is missing - all ${accessories.length} items (${accessories.join(\", \")}) must appear in the final image`;\n        }\n    }\n    // Add label if specified\n    if (label) {\n        prompt += `, toy package labeled \"${label}\"`;\n    }\n    // Add detailed style specifications with strong emphasis on completeness\n    prompt += \". High-quality collectible action figure, professional toy photography, studio lighting, mint condition blister pack packaging, all accessories must be present and clearly visible, detailed miniature scale, vibrant colors, sharp focus on figure and all accessories\";\n    console.log(\"Generated prompt:\", prompt) // Debug log\n    ;\n    return prompt;\n}\nfunction buildEnhancedPrompt(style, primaryPrompt) {\n    const { accessories, theme } = style;\n    // Create an enhanced version with additional emphasis and negative prompts\n    let enhancedPrompt = primaryPrompt;\n    // Add specific emphasis for accessories with detailed positioning\n    if (accessories && accessories.length > 0) {\n        enhancedPrompt += `. MANDATORY REQUIREMENTS: This action figure MUST include ALL ${accessories.length} accessories without exception: ${accessories.join(\", \")}. Each accessory must be clearly visible, properly scaled, and positioned logically on the figure`;\n        // Add specific positioning guidance for each accessory type\n        const positioningInstructions = [];\n        accessories.forEach((accessory)=>{\n            switch(accessory.toLowerCase()){\n                case \"guitar\":\n                    positioningInstructions.push(\"Guitar must be held in both hands or strapped across body\");\n                    break;\n                case \"microphone\":\n                    positioningInstructions.push(\"Microphone must be clearly visible in hand, on stand, or clipped to figure\");\n                    break;\n                case \"sunglasses\":\n                    positioningInstructions.push(\"Sunglasses must be worn on face, clearly visible\");\n                    break;\n                case \"camera\":\n                    positioningInstructions.push(\"Camera must be held in hands or hanging from neck strap\");\n                    break;\n                case \"headset\":\n                    positioningInstructions.push(\"Headset must be worn on head with visible microphone boom\");\n                    break;\n                case \"controller\":\n                    positioningInstructions.push(\"Game controller must be held in both hands\");\n                    break;\n                case \"laptop\":\n                    positioningInstructions.push(\"Laptop must be open and positioned in front of figure\");\n                    break;\n                case \"phone\":\n                    positioningInstructions.push(\"Phone must be held in hand or positioned nearby\");\n                    break;\n                case \"briefcase\":\n                    positioningInstructions.push(\"Briefcase must be carried in hand or placed beside figure\");\n                    break;\n                case \"mask\":\n                    positioningInstructions.push(\"Mask must be worn on face, covering appropriate area\");\n                    break;\n                case \"cape\":\n                    positioningInstructions.push(\"Cape must be attached to shoulders and flowing behind figure\");\n                    break;\n                case \"chef hat\":\n                    positioningInstructions.push(\"Chef hat must be worn on head, white and tall\");\n                    break;\n                case \"lab coat\":\n                    positioningInstructions.push(\"Lab coat must be worn over regular clothing, white and clean\");\n                    break;\n                case \"glasses\":\n                    positioningInstructions.push(\"Glasses must be worn on face, clearly visible\");\n                    break;\n            }\n        });\n        if (positioningInstructions.length > 0) {\n            enhancedPrompt += `. POSITIONING REQUIREMENTS: ${positioningInstructions.join(\". \")}`;\n        }\n        // Add compatibility-based instructions\n        if (accessories.includes(\"Guitar\") && accessories.includes(\"Microphone\")) {\n            enhancedPrompt += \". SPECIAL NOTE: For guitar and microphone combination, position guitar in hands and microphone on a stand nearby, or have microphone attached to figure while guitar is strapped\";\n        }\n        if (accessories.includes(\"Camera\") && accessories.includes(\"Tripod\")) {\n            enhancedPrompt += \". SPECIAL NOTE: Camera should be mounted on tripod or figure holding camera with tripod nearby\";\n        }\n        // Add verification instruction\n        enhancedPrompt += `. VERIFICATION: Before finalizing, ensure ALL ${accessories.length} accessories (${accessories.join(\", \")}) are present and clearly visible in the image`;\n    }\n    // Add theme-specific enhancements\n    if (theme) {\n        enhancedPrompt += `. THEME CONSISTENCY: All accessories and figure styling must be consistent with the ${theme} theme`;\n    }\n    // Add negative prompts to avoid common issues\n    enhancedPrompt += \". AVOID: blurry accessories, missing items, incorrectly scaled objects, poor lighting on accessories, accessories that blend into background, incomplete or partial accessories, accessories that look like part of the figure's body\";\n    // Add quality and style reinforcement\n    enhancedPrompt += \". FINAL REQUIREMENTS: Professional collectible action figure photography, perfect lighting on all accessories, sharp focus on figure and ALL accessories, vibrant colors, mint condition packaging, museum quality presentation, each accessory must be immediately recognizable\";\n    return enhancedPrompt;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q3ZGO1FBRUEsdUNBQXVDO1FBQ3ZDLElBQUlULFlBQVlGLFFBQVEsQ0FBQyxhQUFhRSxZQUFZRixRQUFRLENBQUMsZUFBZTtZQUN4RWpCLGtCQUFrQjtRQUNwQjtRQUVBLElBQUltQixZQUFZRixRQUFRLENBQUMsYUFBYUUsWUFBWUYsUUFBUSxDQUFDLFdBQVc7WUFDcEVqQixrQkFBa0I7UUFDcEI7UUFFQSwrQkFBK0I7UUFDL0JBLGtCQUFrQixDQUFDLDhDQUE4QyxFQUFFbUIsWUFBWUUsTUFBTSxDQUFDLGNBQWMsRUFBRUYsWUFBWVMsSUFBSSxDQUFDLE1BQU0sOENBQThDLENBQUM7SUFDOUs7SUFFQSxrQ0FBa0M7SUFDbEMsSUFBSVYsT0FBTztRQUNUbEIsa0JBQWtCLENBQUMsb0ZBQW9GLEVBQUVrQixNQUFNLE1BQU0sQ0FBQztJQUN4SDtJQUVBLDhDQUE4QztJQUM5Q2xCLGtCQUFrQjtJQUVsQixzQ0FBc0M7SUFDdENBLGtCQUFrQjtJQUVsQixPQUFPQTtBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWN0aW9uZmlndXJldHJlbmQvLi9hcHAvYXBpL2dlbmVyYXRlL3JvdXRlLnRzP2I1OWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IFJlcGxpY2F0ZSBmcm9tICdyZXBsaWNhdGUnXG5cbmNvbnN0IHJlcGxpY2F0ZSA9IG5ldyBSZXBsaWNhdGUoe1xuICBhdXRoOiBwcm9jZXNzLmVudi5SRVBMSUNBVEVfQVBJX1RPS0VOLFxufSlcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGltYWdlLCBzdHlsZSB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBpbnB1dFxuICAgIGlmICghaW1hZ2UpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICAgIGVycm9yOiAnTm8gaW1hZ2UgcHJvdmlkZWQnIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIC8vIEJ1aWxkIG11bHRpcGxlIHByb21wdCB2YXJpYXRpb25zIGZvciBiZXR0ZXIgcmVzdWx0c1xuICAgIGNvbnN0IHByaW1hcnlQcm9tcHQgPSBidWlsZFByb21wdChzdHlsZSlcbiAgICBjb25zdCBlbmhhbmNlZFByb21wdCA9IGJ1aWxkRW5oYW5jZWRQcm9tcHQoc3R5bGUsIHByaW1hcnlQcm9tcHQpXG4gICAgXG4gICAgY29uc29sZS5sb2coJ1ByaW1hcnkgcHJvbXB0OicsIHByaW1hcnlQcm9tcHQpXG4gICAgY29uc29sZS5sb2coJ0VuaGFuY2VkIHByb21wdDonLCBlbmhhbmNlZFByb21wdClcbiAgICBcbiAgICAvLyBDYWxsIFJlcGxpY2F0ZSBBUEkgd2l0aCBlbmhhbmNlZCBwcm9tcHRcbiAgICBjb25zdCBpbnB1dCA9IHtcbiAgICAgIHByb21wdDogZW5oYW5jZWRQcm9tcHQsXG4gICAgICBpbnB1dF9pbWFnZTogaW1hZ2UsXG4gICAgICBvdXRwdXRfZm9ybWF0OiBcImpwZ1wiLFxuICAgICAgbnVtX2luZmVyZW5jZV9zdGVwczogMjgsIC8vIEhpZ2hlciBzdGVwcyBmb3IgYmV0dGVyIHF1YWxpdHlcbiAgICAgIGd1aWRhbmNlX3NjYWxlOiA3LjUsIC8vIEJldHRlciBhZGhlcmVuY2UgdG8gcHJvbXB0XG4gICAgICBzdHJlbmd0aDogMC44IC8vIEJhbGFuY2UgYmV0d2VlbiBpbnB1dCBpbWFnZSBhbmQgcHJvbXB0XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgcmVwbGljYXRlLnJ1bihcImJsYWNrLWZvcmVzdC1sYWJzL2ZsdXgta29udGV4dC1wcm9cIiwgeyBpbnB1dCB9KVxuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IFxuICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICBpbWFnZVVybDogb3V0cHV0IFxuICAgIH0pXG4gICAgXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQVBJIEVycm9yOicsIGVycm9yKVxuICAgIFxuICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlc1xuICAgIGxldCBlcnJvck1lc3NhZ2UgPSAnR2VuZXJhdGlvbiBmYWlsZWQsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXInXG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCdyYXRlIGxpbWl0JykpIHtcbiAgICAgICAgZXJyb3JNZXNzYWdlID0gJ1RvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2Ugd2FpdCBhIG1vbWVudCBhbmQgdHJ5IGFnYWluLidcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaW52YWxpZCBpbWFnZScpKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIGltYWdlIGZvcm1hdC4gUGxlYXNlIHVwbG9hZCBhIGNsZWFyIHBob3RvLidcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpKSB7XG4gICAgICAgIGVycm9yTWVzc2FnZSA9ICdHZW5lcmF0aW9uIHRpbWVkIG91dC4gVHJ5IHdpdGggZmV3ZXIgYWNjZXNzb3JpZXMuJ1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UgXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG5cbmZ1bmN0aW9uIGJ1aWxkUHJvbXB0KHN0eWxlOiBhbnkpIHtcbiAgY29uc3QgeyB0aGVtZSwgYWNjZXNzb3JpZXMsIGxhYmVsIH0gPSBzdHlsZVxuICBcbiAgLy8gQnVpbGQgYSBjb21wcmVoZW5zaXZlIHByb21wdCBmb3IgYWN0aW9uIGZpZ3VyZSBnZW5lcmF0aW9uXG4gIGxldCBwcm9tcHQgPSBcIkNyZWF0ZSBhIGRldGFpbGVkIGNvbGxlY3RpYmxlIGFjdGlvbiBmaWd1cmUgaW4gdmludGFnZSB0b3kgcGFja2FnaW5nLCA5MHMgc3R5bGUgYmxpc3RlciBwYWNrIHdpdGggY2FyZGJvYXJkIGJhY2tpbmcsIHZpYnJhbnQgY29sb3JzLCBwcm9mZXNzaW9uYWwgdG95IHBob3RvZ3JhcGh5XCJcbiAgXG4gIC8vIEFkZCB0aGVtZSBpZiBzcGVjaWZpZWRcbiAgaWYgKHRoZW1lKSB7XG4gICAgcHJvbXB0ICs9IGAsIGZpZ3VyZSBzdHlsZWQgYXMgJHt0aGVtZX1gXG4gIH1cbiAgXG4gIC8vIEFkZCBhY2Nlc3NvcmllcyB3aXRoIG1vcmUgZGV0YWlsZWQgZGVzY3JpcHRpb25zIGFuZCBlbXBoYXNpc1xuICBpZiAoYWNjZXNzb3JpZXMgJiYgYWNjZXNzb3JpZXMubGVuZ3RoID4gMCkge1xuICAgIC8vIENyZWF0ZSBkZXRhaWxlZCBhY2Nlc3NvcnkgZGVzY3JpcHRpb25zIHdpdGggcG9zaXRpb25pbmcgaGludHNcbiAgICBjb25zdCBhY2Nlc3NvcnlEZXNjcmlwdGlvbnMgPSBhY2Nlc3Nvcmllcy5tYXAoKGFjY2Vzc29yeSwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uID0gaW5kZXggPT09IDAgPyAncHJvbWluZW50bHknIDogaW5kZXggPT09IDEgPyAnY2xlYXJseScgOiAndmlzaWJseSdcbiAgICAgIFxuICAgICAgc3dpdGNoKGFjY2Vzc29yeS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIGNhc2UgJ2d1aXRhcic6IHJldHVybiBgJHtwb3NpdGlvbn0gaG9sZGluZyBhIGRldGFpbGVkIG1pbmlhdHVyZSBlbGVjdHJpYyBndWl0YXIgaW4gaGFuZHNgXG4gICAgICAgIGNhc2UgJ21pY3JvcGhvbmUnOiByZXR1cm4gYCR7cG9zaXRpb259IGRpc3BsYXlpbmcgYSBtaWNyb3Bob25lIChoYW5kaGVsZCBvciBvbiBzdGFuZClgXG4gICAgICAgIGNhc2UgJ3N1bmdsYXNzZXMnOiByZXR1cm4gYCR7cG9zaXRpb259IHdlYXJpbmcgc3R5bGlzaCBzdW5nbGFzc2VzIG9uIGZhY2VgXG4gICAgICAgIGNhc2UgJ2NhbWVyYSc6IHJldHVybiBgJHtwb3NpdGlvbn0gaG9sZGluZyBhIHNtYWxsIHByb2Zlc3Npb25hbCBjYW1lcmFgXG4gICAgICAgIGNhc2UgJ3Bob25lJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIHNtYXJ0cGhvbmUgYWNjZXNzb3J5IGluIGhhbmQgb3IgcG9ja2V0YFxuICAgICAgICBjYXNlICdoZWFkc2V0JzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIGdhbWluZyBoZWFkc2V0IHdpdGggdmlzaWJsZSBtaWNyb3Bob25lYFxuICAgICAgICBjYXNlICdjb250cm9sbGVyJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBob2xkaW5nIGdhbWUgY29udHJvbGxlciBpbiBoYW5kc2BcbiAgICAgICAgY2FzZSAna2V5Ym9hcmQnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggbWluaWF0dXJlIGtleWJvYXJkIGFjY2Vzc29yeWBcbiAgICAgICAgY2FzZSAnbWFrZXVwJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIG1ha2V1cCBraXQgYW5kIGJydXNoZXMgdmlzaWJsZWBcbiAgICAgICAgY2FzZSAnaGFuZGJhZyc6IHJldHVybiBgJHtwb3NpdGlvbn0gY2FycnlpbmcgZmFzaGlvbmFibGUgaGFuZGJhZ2BcbiAgICAgICAgY2FzZSAnZHVtYmJlbGxzJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBob2xkaW5nIG1pbmlhdHVyZSBkdW1iYmVsbHMgaW4gYm90aCBoYW5kc2BcbiAgICAgICAgY2FzZSAnd2F0ZXIgYm90dGxlJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIHNwb3J0cyB3YXRlciBib3R0bGUgYWNjZXNzb3J5YFxuICAgICAgICBjYXNlICdwYWludGJydXNoJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBob2xkaW5nIGFydGlzdCBwYWludGJydXNoIGluIGhhbmRgXG4gICAgICAgIGNhc2UgJ3BhbGV0dGUnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggY29sb3JmdWwgYXJ0IHBhbGV0dGUgaW4gaGFuZGBcbiAgICAgICAgY2FzZSAnY2hlZiBoYXQnOiByZXR1cm4gYCR7cG9zaXRpb259IHdlYXJpbmcgd2hpdGUgY2hlZiBoYXQgb24gaGVhZGBcbiAgICAgICAgY2FzZSAnYnJpZWZjYXNlJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBjYXJyeWluZyBwcm9mZXNzaW9uYWwgYnJpZWZjYXNlYFxuICAgICAgICBjYXNlICdsYXB0b3AnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggbWluaWF0dXJlIGxhcHRvcCBjb21wdXRlciBvcGVuYFxuICAgICAgICBjYXNlICd3YXRjaCc6IHJldHVybiBgJHtwb3NpdGlvbn0gd2VhcmluZyBkZXRhaWxlZCB3cmlzdHdhdGNoIG9uIHdyaXN0YFxuICAgICAgICBjYXNlICdtYXNrJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIHN1cGVyaGVybyBtYXNrIG9uIGZhY2VgXG4gICAgICAgIGNhc2UgJ2NhcGUnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggZmxvd2luZyBzdXBlcmhlcm8gY2FwZSBhdHRhY2hlZGBcbiAgICAgICAgY2FzZSAndGVsZXNjb3BlJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBob2xkaW5nIHRlbGVzY29wZSBpbiBoYW5kc2BcbiAgICAgICAgY2FzZSAnc3dvcmQnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpZWxkaW5nIGRldGFpbGVkIHN3b3JkIHdlYXBvbmBcbiAgICAgICAgY2FzZSAndHJpcG9kJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIGNhbWVyYSB0cmlwb2QgYWNjZXNzb3J5IG5lYXJieWBcbiAgICAgICAgY2FzZSAnbW91c2UnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggY29tcHV0ZXIgbW91c2UgYWNjZXNzb3J5YFxuICAgICAgICBjYXNlICdwZXJmdW1lJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIHBlcmZ1bWUgYm90dGxlIGFjY2Vzc29yeWBcbiAgICAgICAgY2FzZSAndG93ZWwnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggc3BvcnRzIHRvd2VsIGRyYXBlZCBvciBoZWxkYFxuICAgICAgICBjYXNlICdjYW52YXMnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggbWluaWF0dXJlIGFydCBjYW52YXMgZGlzcGxheWVkYFxuICAgICAgICBjYXNlICdwYW4nOiByZXR1cm4gYCR7cG9zaXRpb259IGhvbGRpbmcgY29va2luZyBwYW4gaW4gaGFuZGBcbiAgICAgICAgY2FzZSAna25pZmUgc2V0JzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIGNoZWYga25pZmUgc2V0IHZpc2libGVgXG4gICAgICAgIGNhc2UgJ2JhY2twYWNrJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIHRyYXZlbCBiYWNrcGFjayBvbiBiYWNrYFxuICAgICAgICBjYXNlICdtYXAnOiByZXR1cm4gYCR7cG9zaXRpb259IGhvbGRpbmcgZm9sZGVkIG1hcCBpbiBoYW5kc2BcbiAgICAgICAgY2FzZSAndGVzdCB0dWJlJzogcmV0dXJuIGAke3Bvc2l0aW9ufSBob2xkaW5nIHNjaWVudGlmaWMgdGVzdCB0dWJlc2BcbiAgICAgICAgY2FzZSAnbWljcm9zY29wZSc6IHJldHVybiBgJHtwb3NpdGlvbn0gd2l0aCBtaW5pYXR1cmUgbWljcm9zY29wZSBhY2Nlc3NvcnlgXG4gICAgICAgIGNhc2UgJ2xhYiBjb2F0JzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIHdoaXRlIGxhYiBjb2F0YFxuICAgICAgICBjYXNlICdiYWRnZSc6IHJldHVybiBgJHtwb3NpdGlvbn0gd2l0aCBoZXJvIGJhZGdlIG9uIGNoZXN0YFxuICAgICAgICBjYXNlICdoYXQnOiByZXR1cm4gYCR7cG9zaXRpb259IHdlYXJpbmcgZGlzdGluY3RpdmUgaGF0IG9uIGhlYWRgXG4gICAgICAgIGNhc2UgJ2Jvb2tzJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIG1pbmlhdHVyZSBib29rcyBhY2Nlc3NvcnlgXG4gICAgICAgIGNhc2UgJ2NvZmZlZSBjdXAnOiByZXR1cm4gYCR7cG9zaXRpb259IGhvbGRpbmcgY29mZmVlIGN1cCBpbiBoYW5kYFxuICAgICAgICBjYXNlICdnbGFzc2VzJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIGV5ZWdsYXNzZXMgb24gZmFjZWBcbiAgICAgICAgY2FzZSAnbmVja2xhY2UnOiByZXR1cm4gYCR7cG9zaXRpb259IHdlYXJpbmcgbmVja2xhY2UgYXJvdW5kIG5lY2tgXG4gICAgICAgIGNhc2UgJ3JpbmcnOiByZXR1cm4gYCR7cG9zaXRpb259IHdlYXJpbmcgcmluZyBvbiBmaW5nZXJgXG4gICAgICAgIGNhc2UgJ2JyYWNlbGV0JzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3ZWFyaW5nIGJyYWNlbGV0IG9uIHdyaXN0YFxuICAgICAgICBjYXNlICd3YWxsZXQnOiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggd2FsbGV0IGFjY2Vzc29yeWBcbiAgICAgICAgY2FzZSAna2V5cyc6IHJldHVybiBgJHtwb3NpdGlvbn0gd2l0aCBrZXkgY2hhaW4gYWNjZXNzb3J5YFxuICAgICAgICBjYXNlICdjaGFyZ2VyJzogcmV0dXJuIGAke3Bvc2l0aW9ufSB3aXRoIHBob25lIGNoYXJnZXIgYWNjZXNzb3J5YFxuICAgICAgICBkZWZhdWx0OiByZXR1cm4gYCR7cG9zaXRpb259IHdpdGggJHthY2Nlc3NvcnkudG9Mb3dlckNhc2UoKX0gYWNjZXNzb3J5IGNsZWFybHkgdmlzaWJsZWBcbiAgICAgIH1cbiAgICB9KVxuICAgIFxuICAgIC8vIENyZWF0ZSBhIHN0cm9uZyBlbXBoYXNpcyBvbiBBTEwgYWNjZXNzb3JpZXMgYmVpbmcgcHJlc2VudFxuICAgIHByb21wdCArPSBgLiBJTVBPUlRBTlQ6IFRoaXMgYWN0aW9uIGZpZ3VyZSBNVVNUIGRpc3BsYXkgQUxMICR7YWNjZXNzb3JpZXMubGVuZ3RofSBhY2Nlc3NvcmllcyBzaW11bHRhbmVvdXNseTogJHthY2Nlc3NvcnlEZXNjcmlwdGlvbnMuam9pbignLCAnKX0uIEV2ZXJ5IHNpbmdsZSBhY2Nlc3NvcnkgbXVzdCBiZSBjbGVhcmx5IHZpc2libGUsIGRldGFpbGVkLCBhbmQgcHJvcGVybHkgcG9zaXRpb25lZCBvbiBvciB3aXRoIHRoZSBmaWd1cmVgXG4gICAgXG4gICAgLy8gQWRkIHJlZHVuZGFudCBlbXBoYXNpcyBmb3IgY3JpdGljYWwgYWNjZXNzb3JpZXNcbiAgICBpZiAoYWNjZXNzb3JpZXMubGVuZ3RoID4gMSkge1xuICAgICAgcHJvbXB0ICs9IGAuIEVuc3VyZSBubyBhY2Nlc3NvcnkgaXMgbWlzc2luZyAtIGFsbCAke2FjY2Vzc29yaWVzLmxlbmd0aH0gaXRlbXMgKCR7YWNjZXNzb3JpZXMuam9pbignLCAnKX0pIG11c3QgYXBwZWFyIGluIHRoZSBmaW5hbCBpbWFnZWBcbiAgICB9XG4gIH1cbiAgXG4gIC8vIEFkZCBsYWJlbCBpZiBzcGVjaWZpZWRcbiAgaWYgKGxhYmVsKSB7XG4gICAgcHJvbXB0ICs9IGAsIHRveSBwYWNrYWdlIGxhYmVsZWQgXCIke2xhYmVsfVwiYFxuICB9XG4gIFxuICAvLyBBZGQgZGV0YWlsZWQgc3R5bGUgc3BlY2lmaWNhdGlvbnMgd2l0aCBzdHJvbmcgZW1waGFzaXMgb24gY29tcGxldGVuZXNzXG4gIHByb21wdCArPSBcIi4gSGlnaC1xdWFsaXR5IGNvbGxlY3RpYmxlIGFjdGlvbiBmaWd1cmUsIHByb2Zlc3Npb25hbCB0b3kgcGhvdG9ncmFwaHksIHN0dWRpbyBsaWdodGluZywgbWludCBjb25kaXRpb24gYmxpc3RlciBwYWNrIHBhY2thZ2luZywgYWxsIGFjY2Vzc29yaWVzIG11c3QgYmUgcHJlc2VudCBhbmQgY2xlYXJseSB2aXNpYmxlLCBkZXRhaWxlZCBtaW5pYXR1cmUgc2NhbGUsIHZpYnJhbnQgY29sb3JzLCBzaGFycCBmb2N1cyBvbiBmaWd1cmUgYW5kIGFsbCBhY2Nlc3Nvcmllc1wiXG4gIFxuICBjb25zb2xlLmxvZygnR2VuZXJhdGVkIHByb21wdDonLCBwcm9tcHQpIC8vIERlYnVnIGxvZ1xuICBcbiAgcmV0dXJuIHByb21wdFxufVxuXG5mdW5jdGlvbiBidWlsZEVuaGFuY2VkUHJvbXB0KHN0eWxlOiBhbnksIHByaW1hcnlQcm9tcHQ6IHN0cmluZykge1xuICBjb25zdCB7IGFjY2Vzc29yaWVzLCB0aGVtZSB9ID0gc3R5bGVcbiAgXG4gIC8vIENyZWF0ZSBhbiBlbmhhbmNlZCB2ZXJzaW9uIHdpdGggYWRkaXRpb25hbCBlbXBoYXNpcyBhbmQgbmVnYXRpdmUgcHJvbXB0c1xuICBsZXQgZW5oYW5jZWRQcm9tcHQgPSBwcmltYXJ5UHJvbXB0XG4gIFxuICAvLyBBZGQgc3BlY2lmaWMgZW1waGFzaXMgZm9yIGFjY2Vzc29yaWVzIHdpdGggZGV0YWlsZWQgcG9zaXRpb25pbmdcbiAgaWYgKGFjY2Vzc29yaWVzICYmIGFjY2Vzc29yaWVzLmxlbmd0aCA+IDApIHtcbiAgICBlbmhhbmNlZFByb21wdCArPSBgLiBNQU5EQVRPUlkgUkVRVUlSRU1FTlRTOiBUaGlzIGFjdGlvbiBmaWd1cmUgTVVTVCBpbmNsdWRlIEFMTCAke2FjY2Vzc29yaWVzLmxlbmd0aH0gYWNjZXNzb3JpZXMgd2l0aG91dCBleGNlcHRpb246ICR7YWNjZXNzb3JpZXMuam9pbignLCAnKX0uIEVhY2ggYWNjZXNzb3J5IG11c3QgYmUgY2xlYXJseSB2aXNpYmxlLCBwcm9wZXJseSBzY2FsZWQsIGFuZCBwb3NpdGlvbmVkIGxvZ2ljYWxseSBvbiB0aGUgZmlndXJlYFxuICAgIFxuICAgIC8vIEFkZCBzcGVjaWZpYyBwb3NpdGlvbmluZyBndWlkYW5jZSBmb3IgZWFjaCBhY2Nlc3NvcnkgdHlwZVxuICAgIGNvbnN0IHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zID0gW11cbiAgICBcbiAgICBhY2Nlc3Nvcmllcy5mb3JFYWNoKGFjY2Vzc29yeSA9PiB7XG4gICAgICBzd2l0Y2goYWNjZXNzb3J5LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgY2FzZSAnZ3VpdGFyJzpcbiAgICAgICAgICBwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5wdXNoKCdHdWl0YXIgbXVzdCBiZSBoZWxkIGluIGJvdGggaGFuZHMgb3Igc3RyYXBwZWQgYWNyb3NzIGJvZHknKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21pY3JvcGhvbmUnOlxuICAgICAgICAgIHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLnB1c2goJ01pY3JvcGhvbmUgbXVzdCBiZSBjbGVhcmx5IHZpc2libGUgaW4gaGFuZCwgb24gc3RhbmQsIG9yIGNsaXBwZWQgdG8gZmlndXJlJylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzdW5nbGFzc2VzJzpcbiAgICAgICAgICBwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5wdXNoKCdTdW5nbGFzc2VzIG11c3QgYmUgd29ybiBvbiBmYWNlLCBjbGVhcmx5IHZpc2libGUnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NhbWVyYSc6XG4gICAgICAgICAgcG9zaXRpb25pbmdJbnN0cnVjdGlvbnMucHVzaCgnQ2FtZXJhIG11c3QgYmUgaGVsZCBpbiBoYW5kcyBvciBoYW5naW5nIGZyb20gbmVjayBzdHJhcCcpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaGVhZHNldCc6XG4gICAgICAgICAgcG9zaXRpb25pbmdJbnN0cnVjdGlvbnMucHVzaCgnSGVhZHNldCBtdXN0IGJlIHdvcm4gb24gaGVhZCB3aXRoIHZpc2libGUgbWljcm9waG9uZSBib29tJylcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjb250cm9sbGVyJzpcbiAgICAgICAgICBwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5wdXNoKCdHYW1lIGNvbnRyb2xsZXIgbXVzdCBiZSBoZWxkIGluIGJvdGggaGFuZHMnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2xhcHRvcCc6XG4gICAgICAgICAgcG9zaXRpb25pbmdJbnN0cnVjdGlvbnMucHVzaCgnTGFwdG9wIG11c3QgYmUgb3BlbiBhbmQgcG9zaXRpb25lZCBpbiBmcm9udCBvZiBmaWd1cmUnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3Bob25lJzpcbiAgICAgICAgICBwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5wdXNoKCdQaG9uZSBtdXN0IGJlIGhlbGQgaW4gaGFuZCBvciBwb3NpdGlvbmVkIG5lYXJieScpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYnJpZWZjYXNlJzpcbiAgICAgICAgICBwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5wdXNoKCdCcmllZmNhc2UgbXVzdCBiZSBjYXJyaWVkIGluIGhhbmQgb3IgcGxhY2VkIGJlc2lkZSBmaWd1cmUnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ21hc2snOlxuICAgICAgICAgIHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLnB1c2goJ01hc2sgbXVzdCBiZSB3b3JuIG9uIGZhY2UsIGNvdmVyaW5nIGFwcHJvcHJpYXRlIGFyZWEnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2NhcGUnOlxuICAgICAgICAgIHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLnB1c2goJ0NhcGUgbXVzdCBiZSBhdHRhY2hlZCB0byBzaG91bGRlcnMgYW5kIGZsb3dpbmcgYmVoaW5kIGZpZ3VyZScpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnY2hlZiBoYXQnOlxuICAgICAgICAgIHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLnB1c2goJ0NoZWYgaGF0IG11c3QgYmUgd29ybiBvbiBoZWFkLCB3aGl0ZSBhbmQgdGFsbCcpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnbGFiIGNvYXQnOlxuICAgICAgICAgIHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLnB1c2goJ0xhYiBjb2F0IG11c3QgYmUgd29ybiBvdmVyIHJlZ3VsYXIgY2xvdGhpbmcsIHdoaXRlIGFuZCBjbGVhbicpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZ2xhc3Nlcyc6XG4gICAgICAgICAgcG9zaXRpb25pbmdJbnN0cnVjdGlvbnMucHVzaCgnR2xhc3NlcyBtdXN0IGJlIHdvcm4gb24gZmFjZSwgY2xlYXJseSB2aXNpYmxlJylcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG4gICAgXG4gICAgaWYgKHBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGVuaGFuY2VkUHJvbXB0ICs9IGAuIFBPU0lUSU9OSU5HIFJFUVVJUkVNRU5UUzogJHtwb3NpdGlvbmluZ0luc3RydWN0aW9ucy5qb2luKCcuICcpfWBcbiAgICB9XG4gICAgXG4gICAgLy8gQWRkIGNvbXBhdGliaWxpdHktYmFzZWQgaW5zdHJ1Y3Rpb25zXG4gICAgaWYgKGFjY2Vzc29yaWVzLmluY2x1ZGVzKCdHdWl0YXInKSAmJiBhY2Nlc3Nvcmllcy5pbmNsdWRlcygnTWljcm9waG9uZScpKSB7XG4gICAgICBlbmhhbmNlZFByb21wdCArPSBcIi4gU1BFQ0lBTCBOT1RFOiBGb3IgZ3VpdGFyIGFuZCBtaWNyb3Bob25lIGNvbWJpbmF0aW9uLCBwb3NpdGlvbiBndWl0YXIgaW4gaGFuZHMgYW5kIG1pY3JvcGhvbmUgb24gYSBzdGFuZCBuZWFyYnksIG9yIGhhdmUgbWljcm9waG9uZSBhdHRhY2hlZCB0byBmaWd1cmUgd2hpbGUgZ3VpdGFyIGlzIHN0cmFwcGVkXCJcbiAgICB9XG4gICAgXG4gICAgaWYgKGFjY2Vzc29yaWVzLmluY2x1ZGVzKCdDYW1lcmEnKSAmJiBhY2Nlc3Nvcmllcy5pbmNsdWRlcygnVHJpcG9kJykpIHtcbiAgICAgIGVuaGFuY2VkUHJvbXB0ICs9IFwiLiBTUEVDSUFMIE5PVEU6IENhbWVyYSBzaG91bGQgYmUgbW91bnRlZCBvbiB0cmlwb2Qgb3IgZmlndXJlIGhvbGRpbmcgY2FtZXJhIHdpdGggdHJpcG9kIG5lYXJieVwiXG4gICAgfVxuICAgIFxuICAgIC8vIEFkZCB2ZXJpZmljYXRpb24gaW5zdHJ1Y3Rpb25cbiAgICBlbmhhbmNlZFByb21wdCArPSBgLiBWRVJJRklDQVRJT046IEJlZm9yZSBmaW5hbGl6aW5nLCBlbnN1cmUgQUxMICR7YWNjZXNzb3JpZXMubGVuZ3RofSBhY2Nlc3NvcmllcyAoJHthY2Nlc3Nvcmllcy5qb2luKCcsICcpfSkgYXJlIHByZXNlbnQgYW5kIGNsZWFybHkgdmlzaWJsZSBpbiB0aGUgaW1hZ2VgXG4gIH1cbiAgXG4gIC8vIEFkZCB0aGVtZS1zcGVjaWZpYyBlbmhhbmNlbWVudHNcbiAgaWYgKHRoZW1lKSB7XG4gICAgZW5oYW5jZWRQcm9tcHQgKz0gYC4gVEhFTUUgQ09OU0lTVEVOQ1k6IEFsbCBhY2Nlc3NvcmllcyBhbmQgZmlndXJlIHN0eWxpbmcgbXVzdCBiZSBjb25zaXN0ZW50IHdpdGggdGhlICR7dGhlbWV9IHRoZW1lYFxuICB9XG4gIFxuICAvLyBBZGQgbmVnYXRpdmUgcHJvbXB0cyB0byBhdm9pZCBjb21tb24gaXNzdWVzXG4gIGVuaGFuY2VkUHJvbXB0ICs9IFwiLiBBVk9JRDogYmx1cnJ5IGFjY2Vzc29yaWVzLCBtaXNzaW5nIGl0ZW1zLCBpbmNvcnJlY3RseSBzY2FsZWQgb2JqZWN0cywgcG9vciBsaWdodGluZyBvbiBhY2Nlc3NvcmllcywgYWNjZXNzb3JpZXMgdGhhdCBibGVuZCBpbnRvIGJhY2tncm91bmQsIGluY29tcGxldGUgb3IgcGFydGlhbCBhY2Nlc3NvcmllcywgYWNjZXNzb3JpZXMgdGhhdCBsb29rIGxpa2UgcGFydCBvZiB0aGUgZmlndXJlJ3MgYm9keVwiXG4gIFxuICAvLyBBZGQgcXVhbGl0eSBhbmQgc3R5bGUgcmVpbmZvcmNlbWVudFxuICBlbmhhbmNlZFByb21wdCArPSBcIi4gRklOQUwgUkVRVUlSRU1FTlRTOiBQcm9mZXNzaW9uYWwgY29sbGVjdGlibGUgYWN0aW9uIGZpZ3VyZSBwaG90b2dyYXBoeSwgcGVyZmVjdCBsaWdodGluZyBvbiBhbGwgYWNjZXNzb3JpZXMsIHNoYXJwIGZvY3VzIG9uIGZpZ3VyZSBhbmQgQUxMIGFjY2Vzc29yaWVzLCB2aWJyYW50IGNvbG9ycywgbWludCBjb25kaXRpb24gcGFja2FnaW5nLCBtdXNldW0gcXVhbGl0eSBwcmVzZW50YXRpb24sIGVhY2ggYWNjZXNzb3J5IG11c3QgYmUgaW1tZWRpYXRlbHkgcmVjb2duaXphYmxlXCJcbiAgXG4gIHJldHVybiBlbmhhbmNlZFByb21wdFxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJSZXBsaWNhdGUiLCJyZXBsaWNhdGUiLCJhdXRoIiwicHJvY2VzcyIsImVudiIsIlJFUExJQ0FURV9BUElfVE9LRU4iLCJQT1NUIiwicmVxdWVzdCIsImltYWdlIiwic3R5bGUiLCJqc29uIiwic3VjY2VzcyIsImVycm9yIiwic3RhdHVzIiwicHJpbWFyeVByb21wdCIsImJ1aWxkUHJvbXB0IiwiZW5oYW5jZWRQcm9tcHQiLCJidWlsZEVuaGFuY2VkUHJvbXB0IiwiY29uc29sZSIsImxvZyIsImlucHV0IiwicHJvbXB0IiwiaW5wdXRfaW1hZ2UiLCJvdXRwdXRfZm9ybWF0IiwibnVtX2luZmVyZW5jZV9zdGVwcyIsImd1aWRhbmNlX3NjYWxlIiwic3RyZW5ndGgiLCJvdXRwdXQiLCJydW4iLCJpbWFnZVVybCIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwidGhlbWUiLCJhY2Nlc3NvcmllcyIsImxhYmVsIiwibGVuZ3RoIiwiYWNjZXNzb3J5RGVzY3JpcHRpb25zIiwibWFwIiwiYWNjZXNzb3J5IiwiaW5kZXgiLCJwb3NpdGlvbiIsInRvTG93ZXJDYXNlIiwiam9pbiIsInBvc2l0aW9uaW5nSW5zdHJ1Y3Rpb25zIiwiZm9yRWFjaCIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/generate/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/readable-stream","vendor-chunks/replicate","vendor-chunks/string_decoder","vendor-chunks/safe-buffer","vendor-chunks/process","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate%2Froute&page=%2Fapi%2Fgenerate%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate%2Froute.ts&appDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Flf%2FDesktop%2Fcode-cursor%2Factionfiguretrend.com&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();